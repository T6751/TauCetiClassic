name: 'Close stale issues and PRs'
on:
  pull_request:
    branches:
     - master
  issue_comment:
    types: [created]
  schedule:
    - cron: '35,40 * * * *'

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v1
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          stale-pr-message: >
            Данный ПР автоматически отмечен как застоявшийся по причине длительного отсутствия обновлений.
            Он будет закрыт через 7 дней, если никакой активности не будет проявлено.
            Если вы считаете, что ПР еще актуален, или что я (злобный робот) пристаю к вам зря - просто напишите любой комментарий.
            Спасибо за ваш вклад.
          close-pr-message: >
            ПР закрыт из-за длительного отсуствия активности. Для переоткрытия ПРа, пожалуйста, обратитесь к
            кому-либо из мейнтейнеров. Вы можете призвать их в комментарии слапнув ``@TauCetiStation/maintainers``.
          exempt-pr-labels: 'Pinned'
          days-before-pr-stale: 7
          days-before-pr-close: 7
          remove-pr-stale-when-updated: true
          close-issue-message:  >
            Данное предложение пробыло без активности открытым более полугода. Если вы найдёте того, кто его реализует,
            и вам нужно открыть данный ишью, пожалуйста, обратитесь к кому-либо из мейнтейнеров.
            Вы можете призвать их в комментарии слапнув ``@TauCetiStation/maintainers``.
          exempt-issue-labels: 'Bug'
          days-before-issue-stale: 200
          days-before-issue-close: 1
